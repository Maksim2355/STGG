# Шаблонизация и шаблонизаторы в современном мире разработки ПО

//TODO тут может быть красивое вступление(или ваша реклама)

# Разбираемые темы

+ [Шаблонизация](#шаблонизация) 
+ [Где используются шаблонизаторы](#где-используются-шаблонизаторы) 
+ [Популярные шаблонизаторы](#популярные-шаблонизаторы)
+ [Языки шаблонов у популярных ЯП](#популярные-шаблонизаторы)
+ [О дипломном проекте](#о-дипломном-проекте)

# Шаблонизация

Шаблоны — слой преобразования (или схема, набор инструкций) данных из одного формата в другой. Иными словами, это функция, которая принимает на вход какие-то данные/инструкции преобразует их и на вход отдает необходимый результат

Шаблонизатор это вид ПО, который использует шаблон описанный с помощью какого-либо декларативного языка разметки для генерации конечного результата

## Составные элементы шаблонизатора

Основополагающими элементами всех шаблонизаторов являются:

+ __Модель с данными__. Содержит необходимые данные в структурированном виде, которые будут применены к шаблону. Формат данных может быть любым и будет ограничен лишь используемым шаблонизатором. Таким образом, для шаблонизатора могут быть допустимы модели с данными в виде json, yaml, xml, электронны таблиц и тд. В каких-то шаблонизаторах мы можем использовать сразу несколько форматов для моделей, другие же ограничены в типах данных, которы могут быть использованы. Однако, стоит отметить, что на вход шаблонизатору можут передаваться неподготовленные данные. В этом случае для корректной работы движка необходимо их не только получить, но и грамотно структурировать
+ __Шаблоны с данными__. Является каркасом для построение итогового документа и описывают то, какая структура должна будет получиться в результате шаблонизации. Язык шаблонизации так же будет зависеть от конкретного вида шаблонизатора. Он может описывать шаблоны с помощью какого-то языка программирования, специального языка шаблонов или же комбинировать данные подходы для большей гибкости
+ __Движок шаблонов__. Некий механизм, который генерирует необходимый нами документ из модели данных и шаблонов. Ему мы будем передавать необходимы данные в определенном формате и шаблон какого-либа вида и на выходе получать результат
+ __Сгенерированные документы/документ__. Является результатом работы движка шаблонизатора, которому были переданы модели с данными и шаблон. см [задачи шаблонизатора](#по-задачам-шаблонизатора)

Упрощенная модель взаимодействия описанных выше составных частей приведена на следующей диаграмме
![logo](picture/tmp_simple_diagramm.jpeg)


# Классификация шаблонизаторов 

## __По задачам шаблонизатора__

Основная задача шаблонизатора состоит в отделении данных от структуры шаблона и получение конечного результата, полученного наложением данных на конкретный шаблон

Шаблонизаторы используются для генерации

+ __Текста__. В этом случае шаблоны не привязаны к какому-то выходному формату и генерируют произвольный текст
+ __Исходного кода__. Шаблонизаторы могут генерировать исходный код из абстрактных моделей с данными(UML, реляционны данные, спецификация API для swagger и тд)
+ __HTML__. В этом случае в шаблонах мы описываем структуру и получаем готовый HTML. Является один из самых распространеных вариантов шаблонизации.
+ __DOM__. Генерация DOM дерева, которые генерируют шаблоны для составных частей и поддерживают некую связь между HTML и DOM
+ __Файлов конфигурации__

## __По семантике__ 

### Интерполяция строк

Один из самых простых вариантов шаблонизации. В этом случае мы берем некий шаблон и подставляем в какие-то точки шаблона данные, которые мы отдали шаблонизатору. 

Стандартная реализация данного механизма присуща всем языкам программирования. Как пример - вывод оторфматированной строки в консоль. Для примера приведу код на языке Golang

```Golang
    fmt.Printf("Hello %s", "world")
```

Тут на выходе в консоли мы получим необходимую нам строку "Hello world"

Далее возьмем более сложный пример, используем тот же Golang, но уже подключаем к работе его встроенный язык шаблонов

На входе имеем данные о книгах и их жанрах

```Golang
var data = map[string][]string{
    "Sherlock Holmes": []string{"detective", "adventures"},
    "Little prince": []string{"children", "classic"},
}
```

Необходимо вывести эту информацию в следующем виде:
```
book [genres: list of genres]
..
```

Для начала опишем шаблон с помощью встроенного языка шаблонов golang и выведем результат подстановки в консоль

```Golang
var tmpl = "{{range $book, $genres := .}} {{$book}} [genres:{{range $genres}} {{.}}{{end}}] \n{{end}}"
t, _ := template.New("").Parse(tmpl) 
t.Execute(os.Stdout, data) 
```

В переменной tmpl мы описывали то, как будет выглядеть наш шаблон. При этом использовали циклы для нужного нам вывода данных

Получим следующий результат:
```
Sherlock Holmes [genres: detective, adventures]
Little prince [genres: children, classic]
```

Таким образом, мы получили более сложный шаблон при помощи подстановки строк с использованием стандартного языка шаблонов golang


### Data bind

Более сложный вариант. Основная идея в том, что используется шаблон без специальных символов, присущих языку шаблонов. Далее уже с помощью описанных в моделях данных мы преобразуем шаблон и на выходе получаем нужный нам результат

## По типу


## По синтаксису


# Где используются шаблонизаторы



# Популярные шаблонизаторы


# Языки шаблонов у популярных ЯП


# О дипломном проекте